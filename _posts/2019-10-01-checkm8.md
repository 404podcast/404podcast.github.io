---
layout: post
title:  "Chiếu bí iPhone"
categories: podcast
image: /assets/podcast_covers/wired-apple-jailbreak.jpg
podcast_link: http://traffic.libsyn.com/podcast/filename.mp3
podcast_file_size: 13.7 MB
podcast_duration: "14:02"
podcast_length: 13654375
podcast_guid: ?p=866
---

Trong kỳ ra mắt, chúng tôi bàn về một công cụ khai thác lỗ hổng bảo mật của iPhone mới ra mắt. Bạn có thể nghe trực tiếp trên trang web này, tải về hoặc đăng ký nghe (Subscribe) bằng iTunes, Google Play, Pocket Cast, Spotify hoặc bất cứ nơi nào bạn lấy tin của mình.

Sau đây, chúng tôi xin chia sẻ ghi chú kịch bản (có nhiều ý giống nhưng không phải là những gì chúng tôi nói trong podcast) để quý thính giả rộng đường tham khảo.

<!--more-->

Một chuyên gia với bí danh AxioMx, tức Tiên Đề X đã phát hành một công cụ bom tấn tên là checkm8, tức Chiếu Bí, cho phép jailbreak hầu hết các phiên bản iPhone có trên thị trường. Công cụ jailbreak không phải là hiếm, nhưng điểm đặc biệt của Chiếu Bí là Apple sẽ không thể nào ngăn được nó.

Tại sao lại như vậy? Trước tiên chúng ta cần phải hiểu jailbreak là làm gì. Đây là đề tài rất thú vị vì nó liên quan đến chuyện gì diễn ra khi chúng ta bấm nút power để khởi động iPhone. Lúc đó iPhone sẽ thực hiện một quá trình gọi là Verified Boot, tức là khởi động có kiểm soát. Verified Boot đảm bảo phần mềm chạy trên chiếc điện thoại của bạn là phần mềm đã được Apple cho phép. Vậy Verified Boot hoạt động như thế nào?

Để hiểu vấn đề này thì trước tiên chúng ta cần hiểu quá trình khởi động của một chiếc máy tính bình thường. Quá trình khởi động một chiếc máy tính bao gồm nhiều giai đoạn.

Khi mình bấm nút power, thì đoạn chương trình đầu tiên sẽ được chạy là BIOS, viết tắt của Basic Input Output System - thường là chương trình rất nhỏ, chỉ vài trăm KB. Ngày nay chương trình này phức tạp hơn và được gọi là UEFI nhưng ý tưởng vẫn như BIOS. Ví dụ, trên một chiếc Chromebook, chương trình UEFI/BIOS này chỉ gói gọn trên một con chip 64MBit tức là 8MB gắn liền với bo mạch chủ.

BIOS có nhiệm vụ kiểm tra sơ bộ các thiết bị phần cứng rồi chuyển giao việc khởi động cho một chương trình lớn hơn ở trên ổ cứng, gọi là boot loader. Boot loader có nhiệm vụ kiểm tra và chuyển giao cho lõi hệ điều hành, thuật ngữ chuyên ngành gọi là kernel. Lõi hệ điều hành tiếp tục chạy các chương trình lớn hơn, để cuối cùng chúng ta có giao diện đồ họa thân thiện như bạn thấy. Tất cả quá trình này chỉ tốn vài chục giây.

Một chiếc điện thoại iPhone cũng là một chiếc máy tính thu nhỏ, và phần lớn các giai đoạn để khởi động điện thoại rất giống với một chiếc máy tính thông thường. Điểm khác biệt duy nhất là thay vì bạn có BIOS thì bạn có một chương trình không thay đổi được trên một bộ phận phần cứng đặc biệt gọi là BootROM. BootROM này sinh ra với hai mục đích. Múc đích đầu tiên là chỗ dựa cuối cùng khi phần mềm trên điện thoại bị hỏng, ví dụ như khi quá trình cập nhật phần mềm gặp sự cố. Mục đích thứ hai của BootROM là giúp Apple đảm bảo iPhone chỉ chạy hệ điều hành của Apple. Tìm cách vượt qua được cơ chế này chính là jailbreak.

Cách mà BootROM hoạt động cũng khá đơn giản. Nó sẽ tải phần boot loader, kiểm tra sự toàn vẹn và nguồn gốc của boot loader, đảm bảo boot loader là do Apple tạo ra và không bị thay đổi. Sau đó nó sẽ chuyển giao quyền thực thi cho boot loader. Bình thường thì BootROM chỉ tải boot loader từ ổ cứng của điện thoại, nhưng BootROM còn có thể tải thông qua USB, khi người dùng đưa điện thoại vào chế độ Recovery, tức là khôi phục điện thoại. Đoạn mã của BootROM khi tương tác với USB và công cụ jailbreak “Chiếu tướng" khai thác lỗ hổng này để đánh lừa BootROM, cung cấp cho nó một boot loader mạo danh. Boot loader mạo danh này có thể tiếp tục nạp một lõi hệ điều hành không phải do Apple tạo ra. Khi khai thác thành công lỗ hổng này, bạn có thể thay đổi ví dụ như hình trái táo của Apple bằng hình của bạn.

H: Vài năm trước, tôi có nhớ một lỗ hổng tương tự, một nhà phát triển tráo hình trái táo bằng hình trái dứa lên trên chiếc iPhone 3GS của mình, đó là jailbreak gọi là redsn0w được coi là một kỳ tích lúc bấy giờ.

Vậy thì đối với một người dùng bình thường, điều này có ảnh hưởng gì? 

Trước mắt, điều này không đồng nghĩa với việc chiếc điện thoại của bạn sẽ không còn đáng tin cậy nữa. Vì các dữ liệu trên điện thoại của bạn vẫn được mã hóa, và thông tin giải mã được lưu trong một bộ phận phần cứng tên là Secure Enclave. Khi ai đánh cắp điện thoại của bạn và không biết mật khẩu, thì họ vẫn không thể giải mã được thông tin trên điện thoại này.

Để khai thác được lỗ hổng này, kẻ xấu phải trực tiếp có điện thoại của bạn trên tay. Khi bạn nhận điện thoại từ tay người khác, thì có thể nó đang chạy một phần mềm có chứa mã độc. Cách để chắc chắn rằng phần mềm trên điện thoại của bạn an toàn là khởi động lại điện thoại trước khi bạn nhập mật khẩu.

Với người muốn jaỉlbeak thì công cụ này có nghĩa gì?

Ngay cả khi bạn có chủ ý jailbreak điện thoại của mình, thì bạn cũng cần phải có một chiếc máy tính có khả năng gửi bootloader mạo danh mỗi khi điện thoại khởi động.

Vậy thật sự hiểm họa đối với người dùng cuối là gì?

Nhưng điều này có thể là một tin tốt cho các nhà phát triển và nghiên cứu lỗi bảo mật trên điện thoại và các thiết bị của Apple.  
